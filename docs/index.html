<!DOCTYPE html>
<html lang="ru">
<head>
  <title>MSS</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
  <meta
    name="description"
    content="">
  <meta property="og:site_name" content="markdown" />
  <meta property="og:locale" content="ru_RU" />
  <meta property="og:type" content="contract" />
  <meta property="og:title" content="markdown" />
  <meta property="og:description" content="markdown" />
  <meta property="og:url" content="https://zababurinsv.github.io/design/" />
  <meta property="og:image" content="https://i.imgur.com/pSrPUkJ.jpg" />
  <meta property="og:image:width" content="537" />
  <meta property="og:image:height" content="240" />
  <link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
  <link rel="stylesheet"
        href="/services/mss/src/component/fer-notification/views/mjs/notification/styles/index.css">
  <link rel="shortcut icon"
        href="data:image/png;base64, AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbbv+DGW3/mRlt/5kZbf+ZGq6/hIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGa3/ohkt/7/Zbj//2S3/v9lt/6WAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGm5/iRlt/74Zbj//2W4//9luP//Zbf++mi4/i4gIPciGhr24hsb9uwbG/bsGhr24CEh9xoAAAAAAAAAAAAAAABnuP5mZLf+/2W4//9luP//Zbj//2S3/v9muP5yGBj2rhMT9v8TE/b/ExP2/xMT9f8YGPWkAAAAAAAAAAAAAAAAb7z/BGW3/tZluP//Zbj//2W4//9lt/7gJzH3ShMT9f8TE/b/ExP2/xMT9v8TE/b/ExP1/CAg9joAAAAAAAAAAAAAAABmuP5GZLf+6GS3/uhkt/7oZbf+UhgY9YQSEvX/ExP2/xMT9v8TE/b/ExP2/xIS9f8aGvZ8AAAAAD4++gQgIPZ6IiL2hiIi9oYgIPZ8KCj5BAAAAAAtLfgUFBT17BMT9v8TE/b/ExP2/xMT9v8VFfXoLCz4DgAAAAAaGvZqEhL1/xMT9v8TE/b/EhL1/xsb9nIAAAAAAAAAABwc9m4SEvX/ExP2/xMT9v8SEvX/HR32ZAAAAAAnJ/gSFRX16hMT9v8TE/b/ExP2/xMT9v8UFPXuJyf4Fp2xlAKNnqUYLC/mfhYW83ATE/VuFxf1aDc3+gIAAAAAGBj1fhIS9f8TE/b/ExP2/xMT9v8TE/b/ExP1/xkZ9YaGn3yIhZ57/4Wee/+Gn3yKAAAAAAAAAAAAAAAAAAAAACMj9zYTE/X8ExP2/xMT9v8TE/b/ExP2/xMT9f9JUshihZ57+IaffP+Gn3z/hZ579oigfiYAAAAAAAAAAAAAAAAAAAAAGBj1oBIS9f8TE/b/ExP2/xMT9f8YGPWmiKB+PIWee/+Gn3z/hp98/4Wee/+HoH06AAAAAAAAAAAAAAAAAAAAACUl9xgVFfXOExP11BMT9dQUFPXQJib3HgAAAACGn3ymhp98/4affP+Gn3ymAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiKB+EIihf0CIoX9AiKB+EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AADg/wAA4MMAAOCBAADggQAA8QEAAOeBAADDwwAAgf8AAIAPAACBDwAAgQ8AAMMPAAD//wAA//8AAA=="
        type="image/png">
  <link rel="stylesheet" type="text/css" href="/api/swagger-ui.css" />
  <link rel="stylesheet" type="text/css" href="/api/index.css" />
  <style>
      html {
          font-size: 1vmin;
      }

      .invisible {
        display: none;
      }

      .auth {
          z-index: 20;
          position: absolute;
      }

      fer-region::-webkit-scrollbar {
          width: 0
      }

      fer-region::-webkit-scrollbar {
          display: none;
      }

      fer-region::-webkit-scrollbar {
          display: none;
      }

      .error {
          font-size: 32px;
          text-align: center;
          justify-content: center;
          margin-top: 30dvh;
      }

      #describe {
          box-sizing: border-box;
          width: 100%;
          padding: 14px 16px;
      }

      .swagger-menu {
          margin-top: 32px;
          display: flex;
          flex-direction: row;
          gap: 8px;
          font-size: 24px;
      }
  </style>
</head>
<body>
<mss-auth
  open="true"
  data-services-path="mss"
  data-css-shadow="auth_rules"
>
  <template>
    <div class="container">
      <div class="container-content">
        <h2 class="container-logo">
          <div class="logo">
            <img src="/manifest/newkind-icon-128-any.png"/>
          </div>
        </h2>
        <div class="container-description">
          Федеральная электронная регистратура <br>
          Агрегированная витрина расписаний Минздрава России<br>
          Федеральный модуль валидации расписаний
        </div>
        <button class="container-login">Войти</button>
      </div>
    </div>
  </template>
</mss-auth>
<div class="service" slot="service"></div>
<mss-filter
  id="bodyFilterTop"
  class="invisible"
  data-services-path="mss"
  data-css-shadow="mss"
  slot="body_before"
>
  <template>
    <div class="body">

      <div class="back">
        <div class="icon">
          <div class="svg">
            <svg xmlns="http://www.w3.org/2000/svg" width="6" height="11" viewBox="0 0 6 11" fill="none">
              <path d="M6 1.51201L4.99063 0.499512L0 5.49951L4.99062 10.4995L6 9.48701L2.02187 5.49951L6 1.51201Z" fill="#0D4CD3"/>
            </svg>
          </div>
        </div>
        <span class="title">Назад</span>
      </div>

      <div class="page_title">
        Список заголовков
      </div>

      <div
        class="container"
      >
        <fer-select
                class="mss-filter invisible"
                data-value=""
                data-field="code"
                data-services-path="mss"
                data-css-shadow="mss"
        >
          <template>
            <div class="dropdown">
              <div class="dropdown__wrapper">
                <div class="dropdown_input">
                  <button  placeholder="Код" class="dropdown__button" type="button"></button>
                </div>
                <div class="dropdown__button_arrow">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                  </svg>
                </div>
              </div>
              <ul class="dropdown__list">
                <li class="dropdown__list-item" data-value="true">
                </li>
                <li class="dropdown__list-item" data-value="false">
                </li>
              </ul>
            </div>
          </template>
        </fer-select>
        <fer-select
                class="mss-filter"
                data-value=""
                data-field="name"
                data-services-path="mss"
                data-css-shadow="mss"
        >
          <template>
            <div class="dropdown">
              <div class="dropdown__wrapper">
                <div class="dropdown_input">
                  <button  placeholder="Наименование" class="dropdown__button" type="button"></button>
                </div>
                <div class="dropdown__button_arrow">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                  </svg>
                </div>
              </div>
              <ul class="dropdown__list">
                <li class="dropdown__list-item" data-value="true">
                </li>
                <li class="dropdown__list-item" data-value="false">
                </li>
              </ul>
            </div>
          </template>
        </fer-select>
        <mss-input
          class="invisible"
          data-value=""
          data-field="code"
          data-services-path="mss"
          data-css-shadow="mss"
        >
          <template>
            <div class="container">
              <input id="input" placeholder=""/>
            </div>
          </template>
        </mss-input>

        <mss-input
          class="invisible"
          data-value=""
          data-field="name"
          data-services-path="mss"
          data-css-shadow="mss"
        >
          <template>
            <div class="container">
              <input id="input" placeholder=""/>
            </div>
          </template>
        </mss-input>

        <fer-select
          class="mss-filter invisible"
          data-value="true"
          data-field="active"
          data-services-path="mss"
          data-css-shadow="mss"
        >
          <template>
            <div class="dropdown">
              <div class="dropdown__wrapper">
                <div class="dropdown_input">
                  <button  placeholder="Включено" class="dropdown__button" type="button"></button>
                </div>
                <div class="dropdown__button_arrow">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                  </svg>
                </div>
              </div>
              <ul class="dropdown__list">
                <li class="dropdown__list-item" data-value="true">
                  Да
                </li>
                <li class="dropdown__list-item" data-value="false">
                  Нет
                </li>
              </ul>
            </div>
          </template>
        </fer-select>

        <button
          class="button_add"
        >
          Добавить запись
        </button>


        <mss-button
          data-services-path="mss"
          data-css-shadow="mss"
          class="button_filter_first invisible"
        >
          <template>
            <div class="container">

              <div class="filter icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 5.5V6.29744L9.60046 10.5478C10.1704 11.0228 10.5 11.7264 10.5 12.4684V18.0389L12.7938 16.6082C13.2331 16.3342 13.5 15.8531 13.5 15.3355V12.4684C13.5 11.7264 13.8296 11.0228 14.3995 10.5478L19.5 6.29744V5.5H4.5ZM21 7L15.3598 11.7002C15.1318 11.8901 15 12.1716 15 12.4684V15.3355C15 16.3708 14.4661 17.333 13.5877 17.8809L10.1469 20.027C9.64736 20.3386 9 19.9794 9 19.3906V12.4684C9 12.1716 8.86818 11.8901 8.64018 11.7002L3 7V5C3 4.44772 3.44772 4 4 4H20C20.5523 4 21 4.44772 21 5V7Z" fill="#0D4CD3"/>
                </svg>
              </div>

              <div class="filter menu">
                <div class="filter icon close">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9396 11.9998L4.99854 17.9409L6.05919 19.0016L12.0003 13.0605L17.9413 19.0016L19.002 17.9409L13.0609 11.9998L19.002 6.05871L17.9413 4.99805L12.0003 10.9391L6.05921 4.99805L4.99855 6.05871L10.9396 11.9998Z" fill="#0D4CD3"/>
                  </svg>
                </div>
                <div class="filter title">
                  Фильтры
                </div>
                <div class="filter items">
                  <fer-select
                    class="mss-filter"
                    data-value=""
                    data-field="directoryName"
                    data-services-path="mss"
                    data-css-shadow="mss_filter"
                  >
                    <template>
                      <div class="dropdown">
                        <div class="dropdown__wrapper">
                          <div class="dropdown_input">
                            <button  placeholder="" class="dropdown__button" type="button"></button>
                          </div>
                          <div class="dropdown__button_arrow">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                            </svg>
                          </div>
                        </div>
                        <ul class="dropdown__list">

                        </ul>
                      </div>
                    </template>
                  </fer-select>

                  <fer-select
                          class="mss-filter"
                          data-value=""
                          data-field="recipientSystemName"
                          data-services-path="mss"
                          data-css-shadow="mss_filter"
                  >
                    <template>
                      <div class="dropdown">
                        <div class="dropdown__wrapper">
                          <div class="dropdown_input">
                            <button  placeholder="" class="dropdown__button" type="button"></button>
                          </div>
                          <div class="dropdown__button_arrow">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                            </svg>
                          </div>
                        </div>
                        <ul class="dropdown__list">

                        </ul>
                      </div>
                    </template>
                  </fer-select>


                  <fer-select
                          class="mss-filter"
                          data-value=""
                          data-field="interactionName"
                          data-services-path="mss"
                          data-css-shadow="mss_filter"
                  >
                    <template>
                      <div class="dropdown">
                        <div class="dropdown__wrapper">
                          <div class="dropdown_input">
                            <button  placeholder="" class="dropdown__button" type="button"></button>
                          </div>
                          <div class="dropdown__button_arrow">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                            </svg>
                          </div>
                        </div>
                        <ul class="dropdown__list">

                        </ul>
                      </div>
                    </template>
                  </fer-select>


                </div>
                <div class="filter footer">
                  <button class="filter footer clean">Очистить</button>
                  <button class="filter footer execute">Применить</button>
                </div>
              </div>
            </div>
          </template>
        </mss-button>
        <button
          class="button_export invisible"
        >
          Выгрузить
        </button>
        <div class="invisible menu_audit">
          <div class="menu_audit_container">
            <div class="menu_audit_info uid">
                <div class="menu_audit_title">UID</div>
                <div class="menu_audit_value"></div>
            </div>
            <div class="menu_audit_info codeFirst">
              <div class="menu_audit_title"></div>
              <div class="menu_audit_value"></div>
            </div>
            <div class="menu_audit_info codeSecond">
              <div class="menu_audit_title"></div>
              <div class="menu_audit_value"></div>
            </div>
          </div>
          <mss-input
                  data-value=""
                  data-field="export"
                  data-services-path="mss"
                  data-css-shadow="mss"
          >
            <template>
              <div class="container">
                <input readonly id="input" placeholder=""/>
              </div>
            </template>
          </mss-input>
          <mss-button
                  data-services-path="mss"
                  data-css-shadow="mss"
                  class="button_filter"
          >
            <template>
              <div class="container">

                <div class="filter icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 5.5V6.29744L9.60046 10.5478C10.1704 11.0228 10.5 11.7264 10.5 12.4684V18.0389L12.7938 16.6082C13.2331 16.3342 13.5 15.8531 13.5 15.3355V12.4684C13.5 11.7264 13.8296 11.0228 14.3995 10.5478L19.5 6.29744V5.5H4.5ZM21 7L15.3598 11.7002C15.1318 11.8901 15 12.1716 15 12.4684V15.3355C15 16.3708 14.4661 17.333 13.5877 17.8809L10.1469 20.027C9.64736 20.3386 9 19.9794 9 19.3906V12.4684C9 12.1716 8.86818 11.8901 8.64018 11.7002L3 7V5C3 4.44772 3.44772 4 4 4H20C20.5523 4 21 4.44772 21 5V7Z" fill="#0D4CD3"/>
                  </svg>
                </div>

                <div class="filter menu">
                  <div class="filter icon close">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9396 11.9998L4.99854 17.9409L6.05919 19.0016L12.0003 13.0605L17.9413 19.0016L19.002 17.9409L13.0609 11.9998L19.002 6.05871L17.9413 4.99805L12.0003 10.9391L6.05921 4.99805L4.99855 6.05871L10.9396 11.9998Z" fill="#0D4CD3"/>
                    </svg>
                  </div>
                  <div class="filter title">
                    Фильтры
                  </div>
                  <div class="filter items">
                    <fer-select
                            class="mss-filter"
                            data-value=""
                            data-field="logType"
                            data-services-path="mss"
                            data-css-shadow="mss_filter"
                    >
                      <template>
                        <div class="dropdown">
                          <div class="dropdown__wrapper">
                            <div class="dropdown_input">
                              <button  placeholder="" class="dropdown__button" type="button"></button>
                            </div>
                            <div class="dropdown__button_arrow">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                              </svg>
                            </div>
                          </div>
                          <ul class="dropdown__list">

                          </ul>
                        </div>
                      </template>
                    </fer-select>


                    <fer-select
                            class="mss-filter"
                            data-value=""
                            data-field="username"
                            data-services-path="mss"
                            data-css-shadow="mss_filter"
                    >
                      <template>
                        <div class="dropdown">
                          <div class="dropdown__wrapper">
                            <div class="dropdown_input">
                              <button  placeholder="" class="dropdown__button" type="button"></button>
                            </div>
                            <div class="dropdown__button_arrow">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99994 8.93934L11.4696 5.46967L12.5303 6.53033L8.53027 10.5303C8.23738 10.8232 7.76251 10.8232 7.46961 10.5303L3.46961 6.53033L4.53027 5.46967L7.99994 8.93934Z" fill="#0D4CD3"/>
                              </svg>
                            </div>
                          </div>
                          <ul class="dropdown__list"></ul>
                        </div>
                      </template>
                    </fer-select>
                  </div>
                  <div class="filter footer">
                    <button class="filter footer clean">Очистить</button>
                    <button class="filter footer execute">Применить</button>
                  </div>
                </div>
              </div>
            </template>
          </mss-button>
        </div>
      </div>
    </div>
  </template>
</mss-filter>
<fer-notification data-services-path="mss"></fer-notification>
<fer-dialog
  data-css-shadow="mss"
  data-services-path="mss"
>
  <dialog>
    <div class="content"></div>
  </dialog>

</fer-dialog>

<div class="error invisible">
  Извините. Страница временно недоступна
</div>
</body>

<script type="module">
    // import {router} from '/services/mss/src/this/index.mjs'
    import { env } from '/env.mjs';

    let loadingStart = Symbol.for("start_loading");
    let loadingEnd = Symbol.for("end_loading");
    window[loadingStart] = performance.now();

    let dapp = env().DAPP;

    if(!dapp || dapp?.length === 0) {
      dapp = 'system'
    }

    const { store, Fonts } = await import(`/services/${dapp}/src/this/index.mjs`);

    if(location.hostname === 'localhost') {
      store.set('authorization', env().TOKEN)
    }

    let swagger = Symbol.for("swagger");
    let tests = Symbol.for("tests");
    let api = Symbol.for("api");

    store.remove('service')
    store.remove('pathname')
    store.remove('section')
    store.remove('it')
    store.remove('isService')
    store.remove('mount_self')
    store.remove(`mount_${dapp}`)
    store.remove(`current_service`)

    let changeService = {
        genesis: {
            name: 'system',
            pathname: '/services/system/src',
            children: ['mss', 'rules', 'system', 'osc', 'monopoly'],
            mapping: ['name', 'body']
        }
    };

    let services = {}

    for(let i = 0; i < changeService.genesis.children.length; ++i) {
      let property = {
        system: {},
        body: {}
      }

      switch (changeService.genesis.children[i]) {
        case 'mss':
          property = {
            genesis: {
              header: true,
              relation: true,
              body: true,
              property: false,
              footer: true
            },
            body: {
              filter: {
                top: true
              }
            }
          }
          break
        case 'rules':
          property = {
            genesis: {
              header: false,
              relation: true,
              body: true,
              property: false,
              footer: false
            },
            body: {
              filter: {
                top: false
              }
            }
          }
          break
        case 'osc':
          property = {
            genesis: {
              header: true,
              relation: true,
              body: true,
              property: true,
              footer: true
            },
            body: {
              filter: {
                top: true
              }
            }
          }
          break
        default:
          property = {
            genesis: {
              header: true,
              relation: true,
              body: true,
              property: true,
              footer: true
            },
            body: {
              filter: {
                top: true
              }
            }
          }
          break
      }

      services[changeService.genesis.children[i]] = {
        [changeService.genesis.name]: property.genesis,
        [changeService.genesis.mapping[0]]: changeService.genesis.children[i],
        [changeService.genesis.mapping[1]]: property.body
      }
    }

    changeService = Object.assign(changeService, services)

    Fonts(`/services/${changeService[`${dapp}`].name}/src`).catch(e => console.log(e));

    store.set('pathname', {
        pathname: `/services/${changeService[`${dapp}`].name}/src`
    });

    const mssAuth = document.body.querySelector('mss-auth');
    const ferDialog = document.body.querySelector('fer-dialog');
    const ferNotification = document.body.querySelector('fer-notification');

    mssAuth.dataset.cssShadow = dapp;
    ferDialog.dataset.cssShadow = dapp;
    ferNotification.dataset.cssShadow = dapp;

    mssAuth.dataset.servicesPath = dapp;
    ferDialog.dataset.servicesPath = dapp;
    ferNotification.dataset.servicesPath = dapp;

    await import(`/services/${dapp}/src/component/mss-auth/index.mjs`);
    import(`/services/${dapp}/src/component/fer-dialog/index.mjs`);
    import(`/services/${dapp}/src/component/fer-notification/index.mjs`);

    document.addEventListener('authContentLoaded', async (event) => {
      let user = store.get('authorization')

      if(user) {
        store.set('isService', true)
        const { apiInit } = await import(`/api/swagger-initializer.mjs`);
        const init = await apiInit()
        const SwaggerClient = (await import(`/api/swagger-js/es/index.mjs`))['default'];
        window[swagger] = await new SwaggerClient(`${window.location.origin}/api.yaml`)

        const { сonfigRouter } = await import(`/services/${dapp}/src/this/index.mjs`);
        const routes = await сonfigRouter.init();

        console.log('API: ', window[swagger], 'ROUTER: ', routes)

        if (changeService[dapp].body.filter.top) {
          document.body.querySelector('#bodyFilterTop').classList.add('visible');
        }

        const mountPointSystem = {
          pathname: changeService.genesis.pathname,
          pathTemplate: changeService.genesis.name,
          mountPoint: document.body,
          cssLight: dapp
        };

        const { system } = await import(`${changeService.genesis.pathname}/${changeService.genesis.name}.mjs`);

        store.set('current_service', changeService[`${dapp}`].name);

        store.set('service', Object.assign({
          [changeService.genesis.name]: {
            header: true,
            relation: true,
            body: true,
            property: false,
            footer: true
          }
        }, {
          [changeService.genesis.name]: changeService[`${dapp}`][`${changeService.genesis.name}`]
        }));

        store.set('mount_self', mountPointSystem);

        system(mountPointSystem).catch((e) => {
          console.log('ERROR', e);
        });
      } else {
        if(location.hostname === 'localhost') {
          store.set('isService', true)
          const { apiInit } = await import(`/api/swagger-initializer.mjs`);
          const init = await apiInit()
          const SwaggerClient = (await import(`/api/swagger-js/es/index.mjs`))['default'];
          window[swagger] = await new SwaggerClient(`${window.location.origin}/api.yaml`)

          const mountPointSystem = {
            pathname: changeService.genesis.pathname,
            pathTemplate: changeService.genesis.name,
            mountPoint: document.body,
            cssLight: dapp
          };

          const { system } = await import(`${changeService.genesis.pathname}/${changeService.genesis.name}.mjs`);

          store.set('service', Object.assign({
            [changeService.genesis.name]: {
              header: true,
              relation: true,
              body: true,
              property: false,
              footer: true
            }
          }, {
            [changeService.genesis.name]: changeService[`${dapp}`][`${changeService.genesis.name}`]
          }));

          store.set('current_service', changeService[`${dapp}`].name);
          store.set('mount_self', mountPointSystem);

          system(mountPointSystem).catch((e) => {
            console.log('ERROR', e);
          });
        } else {
          mssAuth.open = true
        }
      }
    }, { once: true })

    const navigation = async () => {
      const system = document.body.shadowRoot.querySelector('api-substrate')
      const relation = system.querySelector('api-relation')
      const r_buttons = relation.shadowRoot.querySelectorAll('api-button')
      const mssFilter = document.body.querySelector('mss-filter')
      const backButton = mssFilter.shadowRoot.querySelector('.back')
      const service = document.body.querySelector('.service')
      const route = await router(window, {location})

      let active = null
      r_buttons.forEach(item => {
        if(item.dataset.value === route.value) {
          active = item
        }
      })

      const welcomeSectionCurrent = service.querySelector(`welcome-section[data-id="${route.link? `${route.key}`: 'null'}"]`)
      const welcomeSection = service.querySelector(`welcome-section[data-id="${route.link? `${route.key}_0`: route.key}"]`)

      if(welcomeSectionCurrent === null) {
        const style = window.getComputedStyle(backButton)
        const display = style.getPropertyValue('display')

        debugger
        if(display === 'none') {
          active.click()
        } else {
          backButton.click()
        }
      } else {
        const ferTable = welcomeSectionCurrent.querySelector('fer-table')
        ferTable.controller.api.click.item({
            target: {
              tagName: "STATE"
            },
            currentTarget: {
              dataset: {
                interactionId: route.link,
                subscriptionId: route.link,
              }
            }
        })
      }
    }

    window.addEventListener('popstate', navigation);

    window.addEventListener("beforeunload", function(e) {
        store.remove('service')
        store.remove('pathname')
        store.remove('section')
        store.remove('it')
        store.remove('isService')
        store.remove('mount_self')
        store.remove(`mount_${dapp}`)
        store.remove(`current_service`)
        window.removeEventListener('popstate', navigation);
    });
</script>
</html>
